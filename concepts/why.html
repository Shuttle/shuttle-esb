<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Why use a service bus? | Shuttle.Esb</title>
    <meta name="description" content="Shuttle.Esb Documentation">
    <link rel="stylesheet" href="/shuttle-esb/assets/style.8ac0f86d.css">
    <link rel="modulepreload" href="/shuttle-esb/assets/app.2d1f51b6.js">
    <link rel="modulepreload" href="/shuttle-esb/assets/concepts_why.md.b7ebef43.lean.js">
    <link rel="prefetch" href="/shuttle-esb/assets/chunks/VPAlgoliaSearchBox.dba73f7c.js">
    <link rel="preload" href="/assets/inter-latin.7b37fe23.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script>(()=>{const e=localStorage.getItem("shuttle-theme-appearance");(!e||e==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  <link rel="shortcut icon" href="/shuttle-esb/favicon.ico">
  <meta name="twitter:title" content="Why use a service bus? | Shuttle.Esb">
  <meta property="og:title" content="Why use a service bus? | Shuttle.Esb">
  </head>
  <body>
    <div id="app"><div class="VPApp" data-v-51944a74><!--[--><span tabindex="-1" data-v-2fe6c59b></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-2fe6c59b> Skip to content </a><!--]--><!----><!--[--><!--]--><header class="VPNav nav-bar" data-v-51944a74 data-v-1ffe764b><div class="VPNavBar" data-v-1ffe764b data-v-b188a8fc><div class="container" data-v-b188a8fc><a class="VPNavBarTitle" href="/shuttle-esb/" data-v-b188a8fc data-v-306233cb><svg width="512" height="512" version="1.1" viewbox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" class="logo" data-v-306233cb><path d="m64.139 127.96s-12.139-23.959-12.136-31.963c0.0027-6.5728 5.0091-11.76 11.578-11.989s12.458 5.4443 12.458 11.992c0 7.9766-11.9 31.959-11.9 31.959zm-0.50447-127.76c-5.7902 6.2179-11.795 12.395-16.099 19.783-2.5604 4.3363-4.1582 9.2421-4.5101 14.274-0.55097 7.0293 0.72766 14.022 1.9411 20.916-4.8588 4.3344-9.9262 8.787-12.855 14.723-2.2723 4.4695-2.7019 9.6139-2.3081 14.544 0.60018 7.6433 2.6188 15.073 4.4273 22.497 3.6324-6.2122 6.6771-12.771 10.685-18.761 1.7698-2.6855 3.964-5.1433 6.7463-6.8072 3.7165-2.3199 8.028-3.6246 12.338-4.0278 5.6194 0.5367 11.332 2.5795 15.548 6.4898 3.202 3.191 5.3949 7.2064 7.6184 11.099 2.2107 3.9976 4.3198 8.0503 6.603 12.007 1.9266-7.9475 4.134-15.916 4.5215-24.125 0.21251-4.5798-0.4492-9.2939-2.6353-13.376-2.966-5.7157-7.8886-10.038-12.623-14.263 1.369-7.7989 2.8483-15.793 1.6077-23.713-0.89778-6.1259-3.9184-11.698-7.5517-16.622-3.9431-5.3615-8.5513-10.178-13.089-15.028zm0.4668 24.498c3.1449-1.77e-4 5.8916 2.5563 6.5508 5.6152 0.8638 3.4327-0.88547 7.4537-4.2441 8.791-2.6461 1.136-5.9064 0.15395-7.6172-2.127-2.5378-3.1172-2.1006-8.1998 1.0423-10.749 1.1817-0.99564 2.7206-1.5571 4.2682-1.5305z" fill="#f60"></path></svg><span class="text" data-v-306233cb>Shuttle.Esb</span></a><div class="content" data-v-b188a8fc><div class="VPNavBarSearch search" data-v-b188a8fc><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><span class="DocSearch-Button-Key">Meta</span><span class="DocSearch-Button-Key">K</span></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-b188a8fc data-v-782d1ba1><span id="main-nav-aria-label" class="visually-hidden" data-v-782d1ba1>Main Navigation</span><!--[--><!--[--><a class="vt-link link VPNavBarMenuLink active" href="/shuttle-esb/concepts/why.html" data-v-782d1ba1 data-v-32544593><!--[-->Concepts<!--]--><!----></a><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/shuttle-esb/guide/introduction.html" data-v-782d1ba1 data-v-32544593><!--[-->Guide<!--]--><!----></a><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/shuttle-esb/configuration/full.html" data-v-782d1ba1 data-v-32544593><!--[-->Configuration<!--]--><!----></a><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/shuttle-esb/components/overview.html" data-v-782d1ba1 data-v-32544593><!--[-->Components<!--]--><!----></a><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/shuttle-esb/implementations/overview.html" data-v-782d1ba1 data-v-32544593><!--[-->Implementations<!--]--><!----></a><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/shuttle-esb/modules/overview.html" data-v-782d1ba1 data-v-32544593><!--[-->Modules<!--]--><!----></a><!--]--><!--]--></nav><div class="VPNavBarAppearance appearance" data-v-b188a8fc data-v-6926af2c><button class="vt-switch vt-switch-appearance" type="button" role="switch" aria-label="toggle dark mode" data-v-6926af2c><span class="vt-switch-check"><span class="vt-switch-icon"><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="vt-social-links VPNavBarSocialLinks social-links" data-v-b188a8fc data-v-069b6e4c><!--[--><a class="vt-social-link is-small" href="https://github.com/Shuttle/shuttle-esb" title="github" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-social-link-icon"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden">github</span></a><!--]--></div><div class="vt-flyout VPNavBarExtra extra" ref_key="elRef" data-v-b188a8fc data-v-31683dae><button type="button" class="vt-flyout-button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-flyout-button-icon"><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="vt-flyout-menu"><div class="vt-menu"><!----><!--[--><!--[--><div class="vt-menu-group" data-v-31683dae><div class="vt-menu-item item" data-v-31683dae><p class="vt-menu-label" data-v-31683dae>Appearance</p><div class="vt-menu-action action" data-v-31683dae><button class="vt-switch vt-switch-appearance" type="button" role="switch" aria-label="toggle dark mode" data-v-31683dae><span class="vt-switch-check"><span class="vt-switch-icon"><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="vt-menu-group" data-v-31683dae><div class="vt-menu-item item" data-v-31683dae><div class="vt-social-links social-links" data-v-31683dae><!--[--><a class="vt-social-link is-small" href="https://github.com/Shuttle/shuttle-esb" title="github" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-social-link-icon"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden">github</span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><button type="button" class="vt-hamburger VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-b188a8fc data-v-0432c6a1><span class="vt-hamburger-container"><span class="vt-hamburger-top"></span><span class="vt-hamburger-middle"></span><span class="vt-hamburger-bottom"></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-51944a74 data-v-fb25d52a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-fb25d52a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-fb25d52a><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-fb25d52a>Menu</span></button><a class="top-link" href="#" data-v-fb25d52a>Return to top</a></div><aside ref_key="navEl" class="VPSidebar" data-v-51944a74 data-v-19a11deb><nav id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-19a11deb><!--[--><!--]--><span id="sidebar-aria-label" class="visually-hidden" data-v-19a11deb>Sidebar Navigation</span><!--[--><div class="group" data-v-19a11deb><section class="VPSidebarGroup" data-v-19a11deb data-v-aea56594><div class="title" data-v-aea56594><h2 class="title-text" data-v-aea56594>Concepts</h2></div><!--[--><a class="link" href="/shuttle-esb/concepts/why.html" data-v-aea56594 data-v-c7c1a878><p class="link-text" data-v-c7c1a878>Why?</p></a><a class="link" href="/shuttle-esb/concepts/autonomous-business-components.html" data-v-aea56594 data-v-c7c1a878><p class="link-text" data-v-c7c1a878>Autonomous Business Components</p></a><!--]--></section></div><div class="group" data-v-19a11deb><section class="VPSidebarGroup" data-v-19a11deb data-v-aea56594><div class="title" data-v-aea56594><h2 class="title-text" data-v-aea56594>Patterns</h2></div><!--[--><a class="link" href="/shuttle-esb/concepts/patterns/request-response.html" data-v-aea56594 data-v-c7c1a878><p class="link-text" data-v-c7c1a878>Request / Response</p></a><a class="link" href="/shuttle-esb/concepts/patterns/publish-subscribe.html" data-v-aea56594 data-v-c7c1a878><p class="link-text" data-v-c7c1a878>Publish / Subscribe</p></a><a class="link" href="/shuttle-esb/concepts/patterns/message-distribution.html" data-v-aea56594 data-v-c7c1a878><p class="link-text" data-v-c7c1a878>Message Distribution</p></a><a class="link" href="/shuttle-esb/concepts/patterns/message-idempotence.html" data-v-aea56594 data-v-c7c1a878><p class="link-text" data-v-c7c1a878>Message Idempotence</p></a><a class="link" href="/shuttle-esb/concepts/patterns/deferred-messages.html" data-v-aea56594 data-v-c7c1a878><p class="link-text" data-v-c7c1a878>Deferred Messages</p></a><a class="link" href="/shuttle-esb/concepts/patterns/message-routing.html" data-v-aea56594 data-v-c7c1a878><p class="link-text" data-v-c7c1a878>Message Routing</p></a><!--]--></section></div><div class="group" data-v-19a11deb><section class="VPSidebarGroup" data-v-19a11deb data-v-aea56594><div class="title" data-v-aea56594><h2 class="title-text" data-v-aea56594>Essentials</h2></div><!--[--><a class="link" href="/shuttle-esb/concepts/essentials/bounded-contexts.html" data-v-aea56594 data-v-c7c1a878><p class="link-text" data-v-c7c1a878>Bounded Contexts</p></a><!--]--></section></div><!--]--><!--[--><!--]--></nav></aside><div id="VPContent" class="VPContent has-sidebar" data-v-51944a74 data-v-872d2d9c><div class="VPContentDoc has-aside has-sidebar" data-v-872d2d9c data-v-82173214><div class="container" data-v-82173214><div class="aside" data-v-82173214><div class="aside-container" data-v-82173214><!--[--><!--]--><div class="VPContentDocOutline" ref_key="container" data-v-82173214 data-v-3a2803d6><div class="outline-marker" data-v-3a2803d6></div><div class="outline-title" data-v-3a2803d6>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-3a2803d6><span id="doc-outline-aria-label" class="visually-hidden" data-v-3a2803d6>Table of Contents for current page</span><ul class="root" data-v-3a2803d6><!--[--><li style="" data-v-3a2803d6><a class="outline-link" href="#core" data-v-3a2803d6>Core</a><!----></li><li style="" data-v-3a2803d6><a class="outline-link" href="#messages" data-v-3a2803d6>Messages</a><!----></li><li style="" data-v-3a2803d6><a class="outline-link" href="#queues" data-v-3a2803d6>Queues</a><!----></li><li style="" data-v-3a2803d6><a class="outline-link" href="#service-bus" data-v-3a2803d6>Service bus</a><!----></li><li style="" data-v-3a2803d6><a class="outline-link" href="#message-types" data-v-3a2803d6>Message Types</a><!----></li><li style="" data-v-3a2803d6><a class="outline-link" href="#coupling" data-v-3a2803d6>Coupling</a><!----></li><!--]--></ul></nav></div><!--[--><!--]--><!----><!--[--><!--]--></div></div><div class="content" data-v-82173214><!--[--><!--]--><main data-v-82173214><div style="position:relative;" class="vt-doc concepts" data-v-82173214><div><h1 id="why-use-a-service-bus" tabindex="-1">Why use a service bus? <a class="header-anchor" href="#why-use-a-service-bus" aria-hidden="true">#</a></h1><p>A service bus provides a mechanism to decouple systems. One system should not have any knowledge of the internal workings of another. The way a service bus manages to do this is by using a messaging infrastructure in the form of queues.</p><p>You certainly can code directly against the messaging infrastructure and you will find that there are pros and cons w.r.t. each transport. There are many decisions that you will need to make along the way and this is where a service bus will make your implementation somewhat easier.</p><p>Developing directly against the queuing system will inevitably lead to various abstractions that you will require to prevent duplication.</p><p>A service bus will provide opinions/implementations for:</p><ul><li>Message delivery: <ul><li>exactly-once (distributed transactions - distributed transactions are not supported by all queuing systems)</li><li>at-least once (non-transactional)</li></ul></li><li>Retrying failed messages</li><li>Request / Response</li><li>Message distribution</li><li>Publish/Subscribe (probably quite easy with RabbitMQ directly, not so much with MSMQ directly)</li><li>Message idempotence</li><li>Dependency injection</li><li>Process management</li></ul><p>A service bus will buy you quite a bit out-of=the-box whereas coding against the queues directly may be a bit of work to get going.</p><p>The following provides a quick overview of some service bus concepts as implemented in Shuttle.Esb that may help you along the way.</p><h2 id="core" tabindex="-1">Core <a class="header-anchor" href="#core" aria-hidden="true">#</a></h2><p>The basic parts of Shuttle.Esb consist of:</p><ul><li>Messages</li><li>Queues</li><li>Service bus</li></ul><p>Every service bus instance is associated with, and therefore processes, only one input queue. This is the inbox. All messages received in the inbox are processed by the associated service bus instance.</p><h2 id="messages" tabindex="-1">Messages <a class="header-anchor" href="#messages" aria-hidden="true">#</a></h2><p>Messages are essentially data transfer objects that implement a specific message structure, e.g.:</p><div class="language-c#"><pre><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ActivateMemberCommand</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MemberId</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MemberActivatedEvent</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MemberId</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="queues" tabindex="-1">Queues <a class="header-anchor" href="#queues" aria-hidden="true">#</a></h2><p>Messages are processed by message handlers that are invoked by Shuttle.Esb. When a service bus is started it starts listening for messages in an inbox queue. Messages have to end up in the relevant queue to be processed. The inbox configuration is specified in the application configuration file.</p><p>The approach taken is an <strong>at-least-once</strong> delivery mechanism. This differs from an <strong>exactly-once</strong> delivery in that edge cases may result in a message being processed more than once (these should hardly ever occur). For <strong>exactly-once</strong> delivery edge cases may result in message loss which is impossible to find since a duplicate message is easier to spot than no message at all.</p><p>It is important to note that all queues are non-destructive and should always be implemented with acknowledgement in mind. As soon as a message is retrieved from the queue it should be possible to either acknowledge the message to release the message back onto the queue.</p><h2 id="service-bus" tabindex="-1">Service bus <a class="header-anchor" href="#service-bus" aria-hidden="true">#</a></h2><p>A service bus instance is required in every application that accesses the service bus. To configure the service bus a combination of code, the application configuration file, and custom components is used, e.g.:</p><div class="language-c#"><pre><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Host</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">IServiceHost</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">IServiceBus</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">_bus</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Start</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WindsorComponentContainer</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WindsorContainer</span><span style="color:#89DDFF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">RegisterServiceBus</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        _bus </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Resolve</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">IServiceBus</span><span style="color:#89DDFF;">&gt;().</span><span style="color:#82AAFF;">Start</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Stop</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        _bus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Dispose</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>A service bus instance is created and started on application startup and disposed on exit. A service bus can be hosted in any type of application but the most typical scenario is to host them as services. Although you <em>can</em> write your own service to host your service bus it is not a requirement since you may want to make use of the [generic service host](0).</p><h2 id="message-types" tabindex="-1">Message Types <a class="header-anchor" href="#message-types" aria-hidden="true">#</a></h2><h3 id="command-message" tabindex="-1">Command message <a class="header-anchor" href="#command-message" aria-hidden="true">#</a></h3><p>A command message is used to tell another system or component what to do. This implies that the calling system is aware of the behaviour of the called system. There is, therefore, a high degree of [behavioural coupling].</p><p>A command message always <em><strong>belongs</strong></em> to a single endpoint. Sending a command will never result in the message going to more than <strong>one</strong> queue.</p><h3 id="starting-a-process" tabindex="-1">Starting a process <a class="header-anchor" href="#starting-a-process" aria-hidden="true">#</a></h3><p>There are situations where we need to <em>start</em> something off. Let&#39;s take the case of receiving an order from a client. In our application we would send a <strong>CreateOrderCommand</strong> to our order service. This would kick off the relevant processs.</p><p>So from the client code:</p><div class="language-c#"><pre><code><span class="line"><span style="color:#A6ACCD;">bus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Send</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CreateOrderCommand</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            Name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ClientName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            Product </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ProductXYZ</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">});</span></span>
<span class="line"></span></code></pre></div><p>The call would fail if there is nowhere to send the message.</p><p>We could publish an event such as <strong>OrderReceivedEvent</strong> and our order service could subscribe to the event.</p><div class="language-c#"><pre><code><span class="line"><span style="color:#A6ACCD;">bus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Publish</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">OrderReceivedEvent</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            Name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ClientName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            Product </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ProductXYZ</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">});</span></span>
<span class="line"></span></code></pre></div><p>The call would not fail should there be no subscribers.</p><p>The difference lies purely in the intent of the message. When we can use events they should be preferred but when certain actions are <strong>required</strong> in the system a command may be better suited. Of course, even when using a command approach there may still be some other system interested in knowing that an order has been received and the order service would still publish the event.</p><h3 id="lower-level-functions-rpc" tabindex="-1">Lower-level functions (RPC) <a class="header-anchor" href="#lower-level-functions-rpc" aria-hidden="true">#</a></h3><p>In some situations an event will not be able to relay the intent of any particular action. For instance, we may need to send an e-mail to a manager whenever an order is created (or when the total amount of the order exceeds a set limit). The e-mail service responsible for sending e-mails via our smtp server will not be able to subscribe to the <code>OrderReceivedEvent</code> since the e-mail system would need to be adapted to accomodate rules from another system.</p><p>In this case the e-mail system is responsible for sending e-mails. Any system that would like to send a mail will need to decide when to do so. Therefore, the order service would send a <em>command</em> to the e-mail service:</p><div class="language-c#"><pre><code><span class="line"><span style="color:#A6ACCD;">bus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Send</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SendMailCommand</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                 To </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">manager@ordercompany.co.za</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                 From </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">orderservice@ordercompany.co.za</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                 Subject </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Important Order Received</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                 Body </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Order Details</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#89DDFF;">});</span></span>
<span class="line"></span></code></pre></div><h3 id="event-message" tabindex="-1">Event message <a class="header-anchor" href="#event-message" aria-hidden="true">#</a></h3><p>An event message is used to notify any subscribed components that something significant to the business has taken place. Each endpoint subscribed to an event will get a copy of the event message. If no subscribers exist for an event then publishing the event will have no effect.</p><h3 id="document-message" tabindex="-1">Document message <a class="header-anchor" href="#document-message" aria-hidden="true">#</a></h3><p>A document message is used to simply send data to an endpoint. As with the event message it carries no intent and the recipient may do with it as it pleases. This does not meean that data will be sent to an endpoint for no reason. An endpoint may request a document from some service. Or data is automatically sent to some endpoint since it may be a requirement.</p><p><em>Document messages are not implemented in Shuttle.Esb.</em></p><h2 id="coupling" tabindex="-1">Coupling <a class="header-anchor" href="#coupling" aria-hidden="true">#</a></h2><h3 id="behavioural-coupling" tabindex="-1">Behavioural coupling <a class="header-anchor" href="#behavioural-coupling" aria-hidden="true">#</a></h3><p>Behavioural coupling refers to THE degree one system is aware of the behaviour of another. When a command is sent to a system you expect it to behave in a particular way. This represents a high degree of behavioural coupling. When an event message is published there is no expectation from any subscriber to react in any specific way. This is a low degree of behavioural coupling.</p><p>It is conceivable that there may be an expectation that an event will result in a particular outcome in which case the behavioural coupling increases again.</p><h3 id="temporal-coupling" tabindex="-1">Temporal coupling <a class="header-anchor" href="#temporal-coupling" aria-hidden="true">#</a></h3><p>Temporal coupling refers to the availability of services <strong>when</strong> they are required.</p><p>Should <em>ServiceA</em> require <em>ServiceB</em> to be available for <em>ServiceA</em> to function there is a high degree of temporal coupling. Conversely, if <em>ServiceA</em> can continue to operate even though <em>ServiceB</em> is down then there is a low degree of temporal coupling.</p><p>A synchronous web-service call is an example of high temporal coupling.</p><p>Now you may be wondering how <em>ServiceA</em> can continue to operate even though it requires <em>ServiceB</em> to perform some function. The answer is asynchronous communication using queues. One may argue that a web-service call may be made asynchronously but there is a difference. <em>ServiceA</em> may go down before a required response is received resulting in the web-service call failing.</p><p>With messages things always move in one direction at a time. <em>ServiceA</em> to <em>ServiceB</em> is one operation and will eventually complete. <em>ServiceB</em> to <em>ServiceA</em> is another movement and will eventually complete.</p></div></div><!----></main><!--[--><!--]--><footer class="VPContentDocFooter" data-v-82173214 data-v-a42cc842><!----><a class="next-link" href="/shuttle-esb/concepts/autonomous-business-components.html" data-v-a42cc842><span class="desc" data-v-a42cc842>Next <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-link-icon" data-v-a42cc842><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></span><span class="title" data-v-a42cc842>Autonomous Business Components</span></a></footer></div></div></div></div><div class="visually-hidden" aria-live="polite" data-v-51944a74>Why use a service bus? has loaded</div></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"components_idempotence-service.md\":\"422ae092\",\"components_identity-provider.md\":\"f9aa1680\",\"components_message-handler-invoker.md\":\"f6df782a\",\"components_message-handler.md\":\"51b222d6\",\"components_message-handling-assessor.md\":\"2991a3ce\",\"components_message-route-provider.md\":\"4ffbb8fa\",\"components_message-sender.md\":\"f6696f67\",\"components_overview.md\":\"0f503f99\",\"components_queue-manager.md\":\"d5755ffa\",\"components_service-bus-policy.md\":\"490bcf1c\",\"components_subscription-manager.md\":\"328ec9a4\",\"components_transport-header.md\":\"46f8f08b\",\"components_transport-message-configurator.md\":\"8fe491f7\",\"components_transport-message.md\":\"86a6fb27\",\"concepts_autonomous-business-components.md\":\"dd372752\",\"concepts_essentials_bounded-contexts.md\":\"15e33bce\",\"concepts_patterns_deferred-messages.md\":\"f1b990c6\",\"concepts_patterns_message-distribution.md\":\"cd5465a5\",\"concepts_patterns_message-idempotence.md\":\"5379a77a\",\"concepts_patterns_message-routing.md\":\"4a5ff071\",\"concepts_patterns_publish-subscribe.md\":\"ea09b835\",\"concepts_patterns_request-response.md\":\"bdf41149\",\"concepts_why.md\":\"b7ebef43\",\"configuration_full.md\":\"e2af011c\",\"guide_essentials_exception-handling.md\":\"c71ebefc\",\"guide_getting-started.md\":\"e76e0f51\",\"guide_introduction.md\":\"6d8460d8\",\"guide_patterns_deferred-messages.md\":\"6da46a31\",\"guide_patterns_dependency-injection.md\":\"7312815a\",\"guide_patterns_message-distribution.md\":\"ad118d0b\",\"guide_patterns_message-idempotence.md\":\"fb22c0e7\",\"guide_patterns_process-management.md\":\"3d049d4e\",\"guide_patterns_publish-subscribe.md\":\"2e06ec17\",\"guide_patterns_request-response.md\":\"a0d5598b\",\"guide_upgrade-12.0.0.md\":\"a9ec69e1\",\"implementations_idempotence_sql.md\":\"7c54ff58\",\"implementations_overview.md\":\"fff72e51\",\"implementations_queue_amazonsqs.md\":\"6757ddeb\",\"implementations_queue_azuremq.md\":\"562d2214\",\"implementations_queue_filemq.md\":\"234ac3ef\",\"implementations_queue_msmq.md\":\"b06c4675\",\"implementations_queue_rabbitmq.md\":\"b016977d\",\"implementations_queue_sql.md\":\"19bf34db\",\"implementations_subscription_sql.md\":\"f74a07fb\",\"index.md\":\"c2117424\",\"modules_active-time-range.md\":\"8bc18580\",\"modules_corrupt-transport-message.md\":\"03d2e521\",\"modules_message-forwarding.md\":\"ed242d03\",\"modules_overview.md\":\"17788803\",\"modules_purge-inbox.md\":\"fdb3dd0c\",\"modules_purge-queues.md\":\"a8a3534d\",\"modules_throttle.md\":\"e82dbd4d\"}")</script>
    <script type="module" async src="/shuttle-esb/assets/app.2d1f51b6.js"></script>
    
  </body>
</html>