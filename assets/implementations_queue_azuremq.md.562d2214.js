import { _ as _export_sfc, c as createElementBlock, o as openBlock, a as createStaticVNode } from "./app.2d1f51b6.js";
const __pageData = '{"title":"Azure Storage Queues","description":"","frontmatter":{},"headers":[{"level":2,"title":"Configuration","slug":"configuration"},{"level":2,"title":"IAzureConfiguration","slug":"iazureconfiguration"},{"level":2,"title":"DefaultAzureConfiguration","slug":"defaultazureconfiguration"}],"relativePath":"implementations/queue/azuremq.md"}';
const _sfc_main = {};
const _hoisted_1 = /* @__PURE__ */ createStaticVNode('<h1 id="azure-storage-queues" tabindex="-1">Azure Storage Queues <a class="header-anchor" href="#azure-storage-queues" aria-hidden="true">#</a></h1><div class="language-"><pre><code>PM&gt; Install-Package Shuttle.Esb.AzureMQ\n</code></pre></div><p>In order to make use of the <code>AzureStorageQueue</code> you will need access to an Azure Storage account or <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-use-azurite" target="_blank" rel="noopener noreferrer">use the Azurite emulator for local Azure Storage development</a> for local development.</p><p>You may want to take a look at how to <a href="https://docs.microsoft.com/en-us/azure/storage/queues/storage-dotnet-how-to-use-queues?tabs=dotnet" target="_blank" rel="noopener noreferrer">get started with Azure Queue storage using .NET</a>.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-hidden="true">#</a></h2><p>The queue configuration is part of the specified uri, e.g.:</p><div class="language-xml"><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">inbox</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">workQueueUri</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">azuremq://connection-name/queue-name?maxMessages=15</span><span style="color:#89DDFF;">&quot;</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">/&gt;</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>Segment / Argument</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>connection-name</td><td>required</td><td>Will be resolved by an <code>IAzureConfiguration</code> implementation (<em>see below</em>).</td></tr><tr><td>queue-name</td><td>required</td><td>The name of queue to connect to.</td></tr><tr><td>maxMessages</td><td>1</td><td>Specifies the number of messages to fetch from the queue.</td></tr></tbody></table><h2 id="iazureconfiguration" tabindex="-1">IAzureConfiguration <a class="header-anchor" href="#iazureconfiguration" aria-hidden="true">#</a></h2><div class="language-c#"><pre><code><span class="line"><span style="color:#89DDFF;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">GetConnectionString</span><span style="color:#89DDFF;">(string</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">);</span></span>\n<span class="line"></span></code></pre></div><p>The <code>GetConnectionString()</code> method should return the Azure Storage connection string to use. For local <code>azurite</code> development this would be <code>UseDevelopmentStorage=true</code>.</p><p>The relevant <code>IAzureConfiguration</code> should be registered with the <code>IComponentRegistry</code>:</p><div class="language-c#"><pre><code><span class="line"><span style="color:#A6ACCD;">IComponentResolver.Register</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">IAzureConfiguration, DefaultAzureConfiguration</span><span style="color:#89DDFF;">&gt;;</span></span>\n<span class="line"></span></code></pre></div><h2 id="defaultazureconfiguration" tabindex="-1">DefaultAzureConfiguration <a class="header-anchor" href="#defaultazureconfiguration" aria-hidden="true">#</a></h2><p>This implementation will return the <code>appSetting</code> value for the specified <code>connection-name</code> as the Azure Storage conenction string:</p><div class="language-xml"><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">appSettings</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">add</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">key</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">azure</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UseDevelopmentStorage=true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>\n<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">appSettings</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">inbox</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">workQueueUri</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">azuremq://azure/server-inbox-work-queue</span><span style="color:#89DDFF;">&quot;</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">/&gt;</span></span>\n<span class="line"></span></code></pre></div>', 16);
const _hoisted_17 = [
  _hoisted_1
];
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, _hoisted_17);
}
var azuremq = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export { __pageData, azuremq as default };
