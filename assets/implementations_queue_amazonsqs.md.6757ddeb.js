import { _ as _export_sfc, c as createElementBlock, o as openBlock, a as createStaticVNode } from "./app.2d1f51b6.js";
const __pageData = '{"title":"Amazon SQS","description":"","frontmatter":{},"headers":[{"level":2,"title":"Configuration","slug":"configuration"},{"level":2,"title":"IAmazonSqsConfiguration","slug":"iamazonsqsconfiguration"},{"level":2,"title":"DefaultAmazonSqsConfiguration","slug":"defaultamazonsqsconfiguration"}],"relativePath":"implementations/queue/amazonsqs.md"}';
const _sfc_main = {};
const _hoisted_1 = /* @__PURE__ */ createStaticVNode('<h1 id="amazon-sqs" tabindex="-1">Amazon SQS <a class="header-anchor" href="#amazon-sqs" aria-hidden="true">#</a></h1><div class="language-"><pre><code>PM&gt; Install-Package Shuttle.Esb.AmazonSqs\n</code></pre></div><p>In order to make use of the <code>AmazonSqsQueue</code> you will need access to an <a href="https://aws.amazon.com/sqs/" target="_blank" rel="noopener noreferrer">Amazon Web Services</a> account. There are some options for local development which are beyond the scope of this documentation.</p><p>You may want to take a look at <a href="https://docs.aws.amazon.com/sdk-for-net/v3/developer-guide/sqs-apis-intro.html" target="_blank" rel="noopener noreferrer">Messaging Using Amazon SQS</a>.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-hidden="true">#</a></h2><p>The queue configuration is part of the specified uri, e.g.:</p><div class="language-xml"><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">inbox</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">workQueueUri</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">amazonsqs://endpoint-name/queue-name?maxMessages=15</span><span style="color:#89DDFF;">&amp;</span><span style="color:#C3E88D;">amp</span><span style="color:#89DDFF;">;</span><span style="color:#C3E88D;">waitTimeSeconds=20</span><span style="color:#89DDFF;">&quot;</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">/&gt;</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>Segment / Argument</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>endpoint-name</td><td>required</td><td>Will be resolved by an <code>IAmazonSqsConfiguration</code> implementation (<em>see below</em>).</td></tr><tr><td>queue-name</td><td>required</td><td>The name of queue to connect to.</td></tr><tr><td>maxMessages</td><td>1</td><td>Specifies the number of messages to fetch from the queue.</td></tr><tr><td>waitTimeSeconds</td><td>20</td><td>Specifies the number of seconds to perform the long-polling.</td></tr></tbody></table><h2 id="iamazonsqsconfiguration" tabindex="-1">IAmazonSqsConfiguration <a class="header-anchor" href="#iamazonsqsconfiguration" aria-hidden="true">#</a></h2><div class="language-c#"><pre><code><span class="line"><span style="color:#FFCB6B;">AmazonSQSConfig</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">GetConfiguration</span><span style="color:#89DDFF;">(string</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">endpointName</span><span style="color:#89DDFF;">);</span></span>\n<span class="line"></span></code></pre></div><p>The <code>GetConfiguration()</code> method should return the <a href="https://docs.aws.amazon.com/sdkfornet/v3/apidocs/items/SQS/TSQSConfig.html" target="_blank" rel="noopener noreferrer">Amazon.SQS.AmazonSQSConfig</a> instance that will be used by the <a href="https://docs.aws.amazon.com/sdkfornet/v3/apidocs/items/SQS/TSQSClient.html" target="_blank" rel="noopener noreferrer">AmazonSQSClient</a> to interact with the relevant Amazon SQS queue.</p><p>The relevant <code>IAmazonSqsConfiguration</code> should be registered with the <code>IComponentRegistry</code>:</p><div class="language-c#"><pre><code><span class="line"><span style="color:#A6ACCD;">IComponentResolver.Register</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">IAmazonSqsConfiguration, DefaultAmazonSqsConfiguration</span><span style="color:#89DDFF;">&gt;;</span></span>\n<span class="line"></span></code></pre></div><h2 id="defaultamazonsqsconfiguration" tabindex="-1">DefaultAmazonSqsConfiguration <a class="header-anchor" href="#defaultamazonsqsconfiguration" aria-hidden="true">#</a></h2><p>This implementation will add all the endpoints provided in the application configuration file:</p><div class="language-xml"><pre><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> ?&gt;</span></span>\n<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">configuration</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">configSections</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">section</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">amazonsqs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Shuttle.Esb.AmazonSqs.AmazonSqsSection, Shuttle.Esb.AmazonSqs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">/&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">configSections</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">amazonsqs</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">endpoints</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">endpoint</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">endpoint-a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">serviceUrl</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://sqs.us-east-1.amazonaws.com/123456789012</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">endpoint</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">endpoint-b</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">serviceUrl</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://sqs.us-east-2.amazonaws.com/123456789012</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">endpoints</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">amazonsqs</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">configuration</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">inbox</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">workQueueUri</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">amazonsqs://endpoint-a/server-inbox-work-queue</span><span style="color:#89DDFF;">&quot;</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">    .</span></span>\n<span class="line"><span style="color:#89DDFF;">/&gt;</span></span>\n<span class="line"></span></code></pre></div>', 16);
const _hoisted_17 = [
  _hoisted_1
];
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, _hoisted_17);
}
var amazonsqs = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export { __pageData, amazonsqs as default };
